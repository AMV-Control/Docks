## Техническое задание
Проект: AMV FastInvest

## Содержание
1. [Цели и задачи](#1)
2. [Общее описание](#2)
3. [Требования к реализации](#3) \
3.1 [Типы пользователей](#3.1) \
3.2 [Ценные бумаги](#3.2) \
3.3 [Портфель](#3.3) \
3.4 [Группы портфелей](#3.4) \
3.5 [Поиск ценных бумаг](#3.5) \
3.6 [Аналитика](#3.6) \
3.7 [Брокеры](#3.7) \
3.8 [Биржи](#3.8) \
3.9 [Дизайн](#3.9) 
4. [Сценарии работы](#4)
5. [Дополнительные фичи](#5)
6. [Ссылки](#6)

## <a name="1"></a>1 Цели и задачи
### Цель
Разработать web-приложения для учета и аналитики ценных бумаг
### Задачи
- Реализовать Backend на FastAPI
- Реализовать Frontend на VueJs
- Настроить запуск проекта в Docker
- Настроить CI/CD процессы
- Реализовать асинхронное обновление котировок ценных бумаг, используя различные источники
- Реализовать ежедневный учет статистики

## <a name="2"></a>2 Общее описание
При использовании web приложения у пользователя должна быть возможность:
- зарегистрироваться на платформе с помощью электронной почты или Google аккаунта
- войти в систему с помощью учетных данных (почты или имени пользователя) или Google аккаунта
- создать портфель с указанием брокера, в котором он расположен 
- добавить в портфель различные ценные бумаги по тикерам 
- объединить портфели в группы для учета общей статистики
- возможность получить статистику за "день", "неделю", "месяц", "год", "всё время" по: 
  - ценной бумаге
  - портфелю
  - группе портфелей
- переключить тему сайта на "темную" или "светлую"

## <a name="3"></a>3 Требования к реализации
### <a name="3.1"></a>3.1 Типы пользователей

- User
- Admin

#### User
Обычный пользователь платформы
<br>
Доступные функции:
  - регистрация
  - вход в систему
  - выход из системы 
  - получение всех котировок ценных бумаг
  - управление только своими портфелями
  - получение статистики по своим портфелям

#### Admin
Администратор 
<br>
Доступные функции:
  - все функции типа "User"
  - управление пользователями
  - модерация брокеров

При регистрации пользователя должны быть указаны следующие поля:
- Почта 
- Username
- Пароль (должен храниться в базе данных как хэш)
- Повторение пароля
- Имя
- Фамилия (необязательно)
- Отчество (необязательно)
- Пол (необязательно)
- Страна (необязательно)
- Язык
- Номер телефона (необязательно)

### <a name="3.2"></a>3.2 Ценные бумаги
Ценные бумаги имеют тикер, который однозначно идентифицирует бумагу на какой-то из бирж. 
Ценная бумага должна иметь привязку к бирже с которой берется цена. 
При поиске бумаги и добавлении её в портфель пользователь должен выбирать биржу 
с которой эта бумага будет трекаться 
(либо устанавливать её автоматически, если бумага торгуется только на одной бирже).

3.2.1 Ценная бумага должна иметь тип:
- Акция
- Фонд акций
- Валюта
- Облигация
- Фонд облигаций
- Фьючерс
- Фонд
- Криптовалюта
- Драгоценные металлы
- NFT
- и т.д.

Количество типов ценных бумаг желательно увеличивать динамически

3.2.2 Ценная бумага должна иметь категорию (доступные категории зависят от типа бумаги), категория может совпадать с типом бумаги:
- Акции (+ фонды):
  - Акции
  - Акции США
  - Акции развивающихся стран
  - Акции развитых стран
  - Акции РФ
- Облигации (+ фонды):
  - Облигации
  - Корпоративные
  - Государственные
  - Муниципальные
  - Банковские
- Валюта
  - Доллары
  - Рубли
- и т.д.

3.2.3 Ценная бумага может иметь страну выпуска

3.2.4 Ценная бумага может иметь отрасль:
- Все
- Энергетика
- Материалы
- Промышленность
- Потребительские товары
- Здравоохранение
- Финансы
- Информационные технологии
- Коммуникационные услуги
- Коммунальные услуги
- Недвижимость
- Государственные
- Корпоративные

3.2.5 У бумаги должен быть параметр "Доступность":
- Доступна
- Заморожена 
- и т.п.

3.2.6 Должна быть возможность поставить теги на ценную бумагу, и написать комментарий к ценной бумаге.

3.2.7 Ценная бумага имеет валюту в которой торгуется

### <a name="3.3"></a>3.3 Портфель

Портфель содержит в себе неограниченное количество ценных бумаг различных типов. 
Портфель должен быть привязан к какому-то брокеру. 
У пользователя может быть неограниченное количество портфелей. 
Портфелю необходимо задать пользовательское название.

### <a name="3.4"></a>3.4 Группы портфелей

Несколько портфелей можно объединить в группу. Группе необходимо задать пользовательское имя.
Должна быть возможность включения двух режимов отображения ценных бумаг:
1. Объединять бумаги с одним тикером и принадлежащих одной бирже
2. Отображать бумаги из различных портфелей отдельно с пометкой о портфеле


### <a name="3.5"></a>3.5 Поиск ценных бумаг
Поиск должен осуществляться с использованием внешних API бирж.
Пользователю необходимо указывать биржу на которой производиться поиск бумаги. 
Не нужно хранить информацию о ценной бумаге в базе данных до добавления бумаги в портфель пользователя. 

### <a name="3.6"></a>3.6 Аналитика
Должна быть возможность просмотра статистики по бумаге в портфеле, портфелю, группе портфелей.
Достаточно хранить в базе данных статистику только по бумаге и рассчитывать всё остальное исходя из этого (*опционально).
Цена бумаг должна фиксироваться каждый день в конце дня (на момент закрытия биржи).

Должна быть возможность получить:
  - годовую доходность бумаги, портфеля и группы портфелей (% и число)
  - диаграммы распределения активов портфеля и группы портфелей (% и число)
  - график изменения стоимости бумаги, портфеля и группы портфелей (день, неделя, месяц, год) (% и число)
  - диаграмму изменения стоимости портфеля и группы портфелей
  - суммарную стоимость активов портфеля и группы портфелей
  
### <a name="3.7"></a>3.7 Брокеры
Необходимо хранить в базе данных список брокеров, и 
при создании портфеля предлагать пользователю выбор из доступных брокеров.
Так же у пользователя должна быть возможность добавить брокера, 
которого нет в списке с указанием названия и ссылки на сайт.

У брокеров должна быть пометка "Прошел модерацию" и указание на пользователя, который добавил этого брокера.
Если брокер ещё не прошел модерацию, то данные брокер не будет выводиться для общего поиска брокеров, 
а будет доступен только добавившему его пользователю.

У администратора должна быть возможность получения списка всех брокеров и фильтр по полю "Прошел модерацию".
А также возможность изменять это поле у брокера.


### <a name="3.8"></a>3.8 Биржи

Список бирж для поиска зависит от реализованного взаимодействия с API бирж.

Обязательно необходимо реализовать взаимодействие со следующими биржами
(или с сервисами которые предоставляют от туда данные):
- Московская биржа
- Лондонская биржа
- Binance


### <a name="3.9"></a>3.9 Дизайн
[Макет в Figma](https://www.figma.com/file/BMuShsioFsrkMlTeopVc27/AMV-FastInvest)

Сайт должен корректно отображаться как на ПК, так и на мобильных устройствах.

Должна быть возможность переключения темы (светлая, темная)

#### Предложения по цветовой палитре:
- https://colorhunt.co/palette/06283d1363df47b5ffdff6ff
- https://colorhunt.co/palette/242f9b646fd49ba3ebdbdffd
- фиолетовый + черный
  - фиолетовый - основной 
  - черный - фон
  - зеленый и красный - для аналитики (рост "+", падение "-")


### <a name="4"></a>4 Сценарии работы
_В разработке_

### <a name="5"></a>5 Дополнительные фичи

1. Загрузка информации о портфеле из брокера 
   - один раз при создании 
   - постоянная синхронизация
   
2. Web сокеты для обновления котировок на сайте
3. Маскот в дизайне платформы

### <a name="6"></a>6 Ссылки
#### Сочетание цветов
- https://colorhunt.co/
- https://tailwindcss.com/docs/customizing-colors
- https://colordesigner.io/


